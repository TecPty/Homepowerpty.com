<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Popup - Home Power</title>
    <style>
        /* Estilos del popup */
        .promo-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .promo-popup.active {
            display: flex;
            opacity: 1;
        }

        .promo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(4px);
        }

        .promo-card {
            position: relative;
            z-index: 1;
            max-width: 90%;
            max-height: 90vh;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: popupSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes popupSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .promo-close {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 50%;
            font-size: 28px;
            line-height: 1;
            color: #333;
            cursor: pointer;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .promo-close:hover {
            background: #ff4444;
            color: white;
            transform: rotate(90deg) scale(1.1);
        }

        .promo-media {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .promo-image {
            width: 100%;
            height: auto;
            display: block;
            max-width: 800px;
            transition: transform 0.3s ease;
        }

        .promo-image:hover {
            transform: scale(1.02);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .promo-card {
                max-width: 95%;
                border-radius: 12px;
            }

            .promo-close {
                width: 36px;
                height: 36px;
                font-size: 24px;
                top: 8px;
                right: 8px;
            }
        }

        /* Test controls */
        .test-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 10000;
        }

        .test-btn {
            background: #FF9F1C;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .test-btn:hover {
            background: #e8890b;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 159, 28, 0.4);
        }

        .test-info {
            margin-top: 12px;
            padding: 12px;
            background: #f0f0f0;
            border-radius: 6px;
            font-size: 12px;
            font-family: monospace;
        }

        .test-info div {
            margin: 4px 0;
        }

        .status-ok {
            color: #4CAF50;
            font-weight: bold;
        }

        .status-error {
            color: #f44336;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-top: 50px; font-family: Arial;">
        üß™ Test del Popup Banner - Home Power
    </h1>
    <p style="text-align: center; color: #666; font-family: Arial;">
        El popup deber√≠a aparecer autom√°ticamente en 2 segundos
    </p>

    <!-- POPUP PROMOCIONAL -->
    <div id="seasonalPopup" class="promo-popup" role="dialog" aria-modal="true">
        <div class="promo-overlay" data-close-popup></div>
        <div class="promo-card" role="document">
            <button class="promo-close" type="button" aria-label="Cerrar" data-close-popup>&times;</button>
            <div class="promo-media">
                <img src="media/images/Promocion/optimized/banner-dale-clic.png" 
                     alt="Dale Click y Cont√°ctanos" 
                     class="promo-image"
                     onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22800%22 height=%22600%22%3E%3Crect fill=%22%23ddd%22 width=%22800%22 height=%22600%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 fill=%22%23999%22%3EImagen no encontrada: banner-dale-clic.png%3C/text%3E%3C/svg%3E';">
            </div>
        </div>
    </div>

    <!-- Controles de Testing -->
    <div class="test-controls">
        <button class="test-btn" onclick="testPopup()">üîÑ Mostrar Popup Nuevamente</button>
        <div class="test-info">
            <div><strong>Estado del Test:</strong></div>
            <div id="imageStatus">‚è≥ Verificando imagen...</div>
            <div id="whatsappStatus">‚è≥ Verificando WhatsApp...</div>
            <div id="clickStatus">‚è≥ Esperando clic...</div>
        </div>
    </div>

    <script>
        // Configuraci√≥n
        const WHATSAPP_NUMBER = '50766133830';
        const WHATSAPP_MESSAGE = 'Me interesa obtener informaci√≥n de sus productos';
        
        const popup = document.getElementById('seasonalPopup');
        const closeElements = popup.querySelectorAll('[data-close-popup]');
        const overlay = popup.querySelector('.promo-overlay');
        const promoCard = popup.querySelector('.promo-card');
        const promoImage = popup.querySelector('.promo-image');

        // Funciones del popup
        function openPopup() {
            popup.classList.add('active');
            document.body.style.overflow = 'hidden';
            console.log('‚úÖ Popup abierto');
        }

        function closePopup() {
            popup.classList.remove('active');
            document.body.style.overflow = '';
            console.log('‚úÖ Popup cerrado');
        }

        function redirectToWhatsApp() {
            const encodedMessage = encodeURIComponent(WHATSAPP_MESSAGE);
            const whatsappURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            console.log('‚úÖ Redirigiendo a WhatsApp:', whatsappURL);
            document.getElementById('clickStatus').innerHTML = 
                `<span class="status-ok">‚úÖ Click detectado - Abriendo WhatsApp</span>`;
            
            window.open(whatsappURL, '_blank');
            setTimeout(closePopup, 500);
        }

        // Event Listeners
        closeElements.forEach(el => el.addEventListener('click', closePopup));
        if (overlay) overlay.addEventListener('click', closePopup);

        if (promoImage) {
            promoImage.style.cursor = 'pointer';
            promoImage.addEventListener('click', redirectToWhatsApp);
        }

        if (promoCard) {
            promoCard.style.cursor = 'pointer';
            promoCard.addEventListener('click', function(e) {
                if (!e.target.closest('[data-close-popup]')) {
                    redirectToWhatsApp();
                }
            });
        }

        // Funci√≥n de test
        function testPopup() {
            openPopup();
        }

        // Auto-abrir despu√©s de 2 segundos
        window.addEventListener('load', () => {
            setTimeout(openPopup, 2000);
        });

        // Verificar imagen
        promoImage.addEventListener('load', function() {
            document.getElementById('imageStatus').innerHTML = 
                '<span class="status-ok">‚úÖ Imagen cargada correctamente</span>';
        });

        promoImage.addEventListener('error', function() {
            document.getElementById('imageStatus').innerHTML = 
                '<span class="status-error">‚ùå Error: Imagen no encontrada</span><br>' +
                '<small>Coloca banner-dale-clic.png en media/images/Promocion/optimized/</small>';
        });

        // Verificar configuraci√≥n WhatsApp
        document.getElementById('whatsappStatus').innerHTML = 
            `<span class="status-ok">‚úÖ WhatsApp: ${WHATSAPP_NUMBER}</span>`;

        console.log('üß™ Test del popup iniciado');
        console.log('üì± WhatsApp:', WHATSAPP_NUMBER);
        console.log('üí¨ Mensaje:', WHATSAPP_MESSAGE);
    </script>
</body>
</html>
